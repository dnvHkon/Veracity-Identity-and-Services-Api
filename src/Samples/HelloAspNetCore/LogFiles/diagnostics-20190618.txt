2019-06-18 09:29:31.674 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Generating webapi controller for Veracity.Services.Api.IMy
2019-06-18 09:29:31.752 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Generating webapi controller for Veracity.Services.Api.IThis
2019-06-18 09:29:32.004 +02:00 [Information] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager: User profile is available. Using 'C:\Users\jonsyr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-06-18 09:29:32.471 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request starting HTTP/1.1 GET http://localhost:44326/signin-oidc  
2019-06-18 09:29:32.508 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Binding events
2019-06-18 09:29:32.625 +02:00 [Error] Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware: An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The MetadataAddress or Authority must use HTTPS unless disabled for development by setting RequireHttpsMetadata=false.
   at Microsoft.AspNetCore.Authentication.OpenIdConnect.OpenIdConnectPostConfigureOptions.PostConfigure(String name, OpenIdConnectOptions options)
   at Microsoft.Extensions.Options.OptionsFactory`1.Create(String name)
   at Microsoft.Extensions.Options.OptionsMonitor`1.<>c__DisplayClass10_0.<Get>b__0()
   at System.Lazy`1.ViaFactory(LazyThreadSafetyMode mode)
   at System.Lazy`1.ExecutionAndPublication(LazyHelper executionAndPublication, Boolean useDefaultConstructor)
   at System.Lazy`1.CreateValue()
   at Microsoft.Extensions.Options.OptionsCache`1.GetOrAdd(String name, Func`1 createOptions)
   at Microsoft.Extensions.Options.OptionsMonitor`1.Get(String name)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.InitializeAsync(AuthenticationScheme scheme, HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandlerProvider.GetHandlerAsync(HttpContext context, String authenticationScheme)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-06-18 09:29:32.672 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request finished in 201.1942ms 500 text/html; charset=utf-8
2019-06-18 13:27:40.608 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Generating webapi controller for Veracity.Services.Api.IMy
2019-06-18 13:27:40.668 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Generating webapi controller for Veracity.Services.Api.IThis
2019-06-18 13:27:40.888 +02:00 [Information] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager: User profile is available. Using 'C:\Users\jonsyr\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2019-06-18 13:27:41.320 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request starting HTTP/1.1 GET http://localhost:44326/  
2019-06-18 13:27:41.350 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Binding events
2019-06-18 13:27:41.477 +02:00 [Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler: Cookies was not authenticated. Failure message: Unprotect ticket failed
2019-06-18 13:27:41.775 +02:00 [Information] Microsoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker: Route matched with {page = "/Index", action = "", controller = ""}. Executing action /Index
2019-06-18 13:27:41.810 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client IMy
2019-06-18 13:27:41.811 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IMy.Info
2019-06-18 13:27:41.821 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IMy.GetMessageCount
2019-06-18 13:27:41.821 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IMy.GetMessagesAsync
2019-06-18 13:27:41.821 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IMy.GetMessageAsync
2019-06-18 13:27:41.822 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IMy.MarkMessageAsRead
2019-06-18 13:27:41.822 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IMy.GetMyCompanies
2019-06-18 13:27:41.822 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IMy.ValidatePolicy
2019-06-18 13:27:41.822 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IMy.ValidatePolicies
2019-06-18 13:27:41.822 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IMy.MyServices
2019-06-18 13:27:41.829 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client IThis
2019-06-18 13:27:41.830 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.GetServices
2019-06-18 13:27:41.830 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.GetUsers
2019-06-18 13:27:41.830 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.GetServiceUser
2019-06-18 13:27:41.830 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.GetUserForService
2019-06-18 13:27:41.830 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.GetServiceUsers
2019-06-18 13:27:41.831 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.AddUserAsync
2019-06-18 13:27:41.831 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.AddServiceUser
2019-06-18 13:27:41.832 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.RemoveServiceUser
2019-06-18 13:27:41.832 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.RemoveUser
2019-06-18 13:27:41.832 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.ResolveUser
2019-06-18 13:27:41.832 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.CreateUser
2019-06-18 13:27:41.832 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.CreateUsers
2019-06-18 13:27:41.833 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.GetAdmins
2019-06-18 13:27:41.833 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.GetAdmin
2019-06-18 13:27:41.833 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.GetServiceAdmin
2019-06-18 13:27:41.833 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.GetServiceAdmins
2019-06-18 13:27:41.833 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IThis.NotifyUsers
2019-06-18 13:27:41.837 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client IUsersDirectory
2019-06-18 13:27:41.837 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IUsersDirectory.GetUsersByEmail
2019-06-18 13:27:41.837 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IUsersDirectory.GetUser
2019-06-18 13:27:41.838 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IUsersDirectory.GetUsersIn
2019-06-18 13:27:41.839 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IUsersDirectory.GetUserCompanies
2019-06-18 13:27:41.840 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IUsersDirectory.GetUserServices
2019-06-18 13:27:41.840 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IUsersDirectory.GetUserSubscriptionDetails
2019-06-18 13:27:41.842 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client ICompaniesDirectory
2019-06-18 13:27:41.842 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action ICompaniesDirectory.CompanyById
2019-06-18 13:27:41.842 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action ICompaniesDirectory.GetUsersByCompany
2019-06-18 13:27:41.845 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client IServicesDirectory
2019-06-18 13:27:41.845 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IServicesDirectory.GetServiceById
2019-06-18 13:27:41.845 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IServicesDirectory.GetUsers
2019-06-18 13:27:41.846 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IServicesDirectory.IsAdmin
2019-06-18 13:27:41.849 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client IDataContainerService
2019-06-18 13:27:41.849 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IDataContainerService.GetDataContainers
2019-06-18 13:27:41.849 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IDataContainerService.CreateDataContainer
2019-06-18 13:27:41.849 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Initializing client action IDataContainerService.DeleteDataContainer
2019-06-18 13:27:41.862 +02:00 [Information] Microsoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker: Executing handler method OnGet - ModelState is Valid
2019-06-18 13:27:42.004 +02:00 [Information] Microsoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker: Executed action /Index in 226.5787ms
2019-06-18 13:27:42.012 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request finished in 692.3518ms 200 text/html; charset=utf-8
2019-06-18 13:30:24.075 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request starting HTTP/1.1 GET http://localhost:44326/lib/bootstrap/dist/css/bootstrap.css.map  
2019-06-18 13:30:24.188 +02:00 [Information] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware: Sending file. Request path: '/lib/bootstrap/dist/css/bootstrap.css.map'. Physical path: 'C:\source\repos\Veracity\ApiV3Client\src\Samples\HelloAspNetCore\wwwroot\lib\bootstrap\dist\css\bootstrap.css.map'
2019-06-18 13:30:24.191 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request finished in 116.4865ms 200 text/plain
2019-06-18 13:30:29.897 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request starting HTTP/1.1 GET http://localhost:44326/Account/SignIn  
2019-06-18 13:30:29.899 +02:00 [Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler: Cookies was not authenticated. Failure message: Unprotect ticket failed
2019-06-18 13:30:29.919 +02:00 [Information] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker: Route matched with {action = "SignIn", controller = "Account", page = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult SignIn() on controller HelloAspNetCore.Controllers.AccountController (HelloAspNetCore).
2019-06-18 13:30:29.926 +02:00 [Information] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker: Executing action method HelloAspNetCore.Controllers.AccountController.SignIn (HelloAspNetCore) - Validation state: Valid
2019-06-18 13:30:29.928 +02:00 [Information] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker: Executed action method HelloAspNetCore.Controllers.AccountController.SignIn (HelloAspNetCore), returned result Microsoft.AspNetCore.Mvc.ChallengeResult in 0.4689ms.
2019-06-18 13:30:29.929 +02:00 [Information] Microsoft.AspNetCore.Mvc.ChallengeResult: Executing ChallengeResult with authentication schemes (OpenIdConnect).
2019-06-18 13:30:31.737 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Redirecting
2019-06-18 13:30:31.743 +02:00 [Information] Microsoft.AspNetCore.Authentication.OpenIdConnect.OpenIdConnectHandler: AuthenticationScheme: OpenIdConnect was challenged.
2019-06-18 13:30:31.753 +02:00 [Information] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker: Executed action HelloAspNetCore.Controllers.AccountController.SignIn (HelloAspNetCore) in 1834.185ms
2019-06-18 13:30:31.757 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request finished in 1859.7341ms 200 text/html;charset=UTF-8
2019-06-18 13:30:35.293 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request starting HTTP/1.1 POST http://localhost:44326/signin-oidc application/x-www-form-urlencoded 3389
2019-06-18 13:30:35.457 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Auth code received...
2019-06-18 13:30:40.494 +02:00 [Debug] Veracity.Common.Authentication.VeracityService: Policies validated!
2019-06-18 13:30:41.223 +02:00 [Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler: AuthenticationScheme: Cookies signed in.
2019-06-18 13:30:41.224 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request finished in 5934.8116ms 302 
2019-06-18 13:30:41.241 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request starting HTTP/1.1 GET http://localhost:44326/  
2019-06-18 13:30:41.246 +02:00 [Information] Microsoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker: Route matched with {page = "/Index", action = "", controller = ""}. Executing action /Index
2019-06-18 13:30:41.247 +02:00 [Information] Microsoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker: Executing handler method OnGet - ModelState is Valid
2019-06-18 13:30:41.808 +02:00 [Information] Microsoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker: Executed action /Index in 561.882ms
2019-06-18 13:30:41.808 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request finished in 567.6008ms 200 text/html; charset=utf-8
2019-06-18 13:30:51.305 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request starting HTTP/1.1 GET http://localhost:44326/Account/SignOut  
2019-06-18 13:30:51.307 +02:00 [Information] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker: Route matched with {action = "SignOut", controller = "Account", page = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult SignOut() on controller HelloAspNetCore.Controllers.AccountController (HelloAspNetCore).
2019-06-18 13:30:51.307 +02:00 [Information] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker: Executing action method HelloAspNetCore.Controllers.AccountController.SignOut (HelloAspNetCore) - Validation state: Valid
2019-06-18 13:30:51.307 +02:00 [Information] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker: Executed action method HelloAspNetCore.Controllers.AccountController.SignOut (HelloAspNetCore), returned result Microsoft.AspNetCore.Mvc.SignOutResult in 0.3858ms.
2019-06-18 13:30:51.309 +02:00 [Information] Microsoft.AspNetCore.Mvc.SignOutResult: Executing SignOutResult with authentication schemes (Cookies, OpenIdConnect).
2019-06-18 13:30:51.312 +02:00 [Information] Microsoft.AspNetCore.Authentication.Cookies.CookieAuthenticationHandler: AuthenticationScheme: Cookies signed out.
2019-06-18 13:30:51.315 +02:00 [Information] Microsoft.AspNetCore.Authentication.OpenIdConnect.OpenIdConnectHandler: AuthenticationScheme: OpenIdConnect signed out.
2019-06-18 13:30:51.315 +02:00 [Information] Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker: Executed action HelloAspNetCore.Controllers.AccountController.SignOut (HelloAspNetCore) in 8.3955ms
2019-06-18 13:30:51.315 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request finished in 10.4899ms 200 text/html;charset=UTF-8
2019-06-18 13:30:52.577 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request starting HTTP/1.1 GET http://localhost:44326/signout-callback-oidc?state=CfDJ8LlZW4ohbjNLnLBWt2UF6R4XHV0-eRsuWSF8HDsIyjJC8pS80xRwbTSqEA8tsclJ4vAcD639fyTGOp-7O6LmwchlCCIqYFbt5d1s2vMYGpJUdXAZx908qMUpxjtWcPm0z_Ve7SIkKQj0zOcbGc5gC8Mf03jmhD4x2N46GfKf0_GS6lerl6c9fdCFdYqiAaSCjQ  
2019-06-18 13:30:52.580 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request finished in 3.6157ms 302 
2019-06-18 13:31:28.506 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request starting HTTP/1.1 GET http://localhost:44326/  
2019-06-18 13:31:28.507 +02:00 [Information] Microsoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker: Route matched with {page = "/Index", action = "", controller = ""}. Executing action /Index
2019-06-18 13:31:28.510 +02:00 [Information] Microsoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker: Executing handler method OnGet - ModelState is Valid
2019-06-18 13:31:28.512 +02:00 [Information] Microsoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker: Executed action /Index in 4.6752ms
2019-06-18 13:31:28.512 +02:00 [Information] Microsoft.AspNetCore.Hosting.Internal.WebHost: Request finished in 6.1458ms 200 text/html; charset=utf-8
